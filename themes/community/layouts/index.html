{{ define "hero" }}
<!-- Hero Section -->
<section class="text-gray-600 body-font">
    <div class="container mx-auto flex px-5 py-24 md:flex-row flex-col items-center">
        <div
            class="lg:flex-grow md:w-1/2 lg:pr-24 md:pr-16 flex flex-col md:items-start md:text-left mb-16 md:mb-0 items-center text-center">
            <h1 class="title-font sm:text-4xl text-3xl mb-4 font-medium text-gray-900">Cache Valley Communities
                <br class="hidden lg:inline-block">Building Connections
            </h1>
            <p class="mb-8 leading-relaxed">Cache Valley Communities aims to partner with organizations in the Cache
                Valley, Utah area to provide up-to-date information in a readily accessible manner.</p>
            <div class="flex justify-center">
                <a href="/organizations" class="btn btn-primary">Explore Organizations</a>
                <a href="/posts" class="btn btn-secondary ml-4">Read Latest Posts</a>
            </div>
        </div>
        <div class="lg:max-w-lg lg:w-full md:w-1/2 w-5/6">
            <img class="object-cover object-center rounded" alt="hero"
                src="https://images.unsplash.com/photo-1569981889244-a358a2d4427b?q=80&w=3028&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D">
        </div>
    </div>
</section>
{{ end }}

{{ define "main" }}
<!-- Organizations Section -->
<section class="text-gray-600 body-font">
    <div class="container px-5 py-24 mx-auto">
        <div class="flex flex-col text-center w-full mb-20">
            <h2 class="sm:text-3xl text-2xl font-medium title-font text-gray-900">Featured Organizations</h2>
            <p class="lg:w-2/3 mx-auto leading-relaxed text-base">Discover the amazing organizations making a difference
                in Cache Valley</p>
        </div>
        <div class="flex flex-wrap -m-4">
            {{ with .Site.GetPage "/organizations" }}
            {{ range first 3 (sort .Data.Pages "Date" "desc" (where .Pages ".Params.private" "!=" true))}}
            <div class="p-4 md:w-1/3">
                <div
                    class="h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300">
                    {{ if .Params.image }}
                    {{ $image := .Page.Resources.GetMatch .Params.image }}
                    {{ if $image }}
                    {{ $thumb := $image.Resize "400x" }}
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center" src="{{ $thumb.RelPermalink }}"
                        alt="{{ .Title }}">
                    {{ else }}
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center"
                        src="https://dummyimage.com/720x400/4f46e5/ffffff&text={{ .Title }}" alt="{{ .Title }}">
                    {{ end }}
                    {{ else }}
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center"
                        src="https://dummyimage.com/720x400/4f46e5/ffffff&text={{ .Title }}" alt="{{ .Title }}">
                    {{ end }}
                    <div class="p-6">
                        <h2 class="tracking-widest text-xs title-font font-medium text-gray-400 mb-1">ORGANIZATION</h2>
                        <h1 class="title-font text-lg font-medium text-gray-900 mb-3">{{ .Title }}</h1>
                        <p class="leading-relaxed mb-3">{{ if .Summary }}{{ .Summary | truncate 120 }}{{ else }}{{
                            .Content | truncate 120 | plainify }}{{ end }}</p>
                        <div class="flex items-center flex-wrap">
                            <a href="{{ .Permalink }}"
                                class="text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0">Learn More
                                <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12h14"></path>
                                    <path d="M12 5l7 7-7 7"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
            {{ end }}
        </div>
        <div class="flex justify-center mt-8">
            <a href="/organizations" class="btn btn-primary">View All Organizations</a>
        </div>
    </div>
</section>

<iframe src="https://discord.com/widget?id=1261615456209469440&theme=dark" width="350" height="500"
    allowtransparency="true" frameborder="0"
    sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"></iframe>

<!-- Latest Posts Section -->
<section class="text-gray-600 body-font">
    <div class="container px-5 py-24 mx-auto">
        <div class="flex flex-col text-center w-full mb-20">
            <h2 class="sm:text-3xl text-2xl font-medium title-font text-gray-900">Latest Posts</h2>
            <p class="lg:w-2/3 mx-auto leading-relaxed text-base">Stay updated with the latest news and insights from
                our community</p>
        </div>
        <div class="flex flex-wrap -m-4">
            {{ with .Site.GetPage "/posts" }}
            {{ range first 6 (sort .Data.Pages "Date" "desc" (where .Pages ".Params.private" "!=" true))}}
            <div class="p-4 md:w-1/3">
                <div
                    class="h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden hover:shadow-lg transition-shadow duration-300">
                    {{ if .Params.image }}
                    {{ $image := .Page.Resources.GetMatch .Params.image }}
                    {{ if $image }}
                    {{ $thumb := $image.Resize "400x" }}
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center" src="{{ $thumb.RelPermalink }}"
                        alt="{{ .Title }}">
                    {{ else }}
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center"
                        src="https://dummyimage.com/720x400/4f46e5/ffffff&text={{ .Title }}" alt="{{ .Title }}">
                    {{ end }}
                    {{ else }}
                    <img class="lg:h-48 md:h-36 w-full object-cover object-center"
                        src="https://dummyimage.com/720x400/4f46e5/ffffff&text={{ .Title }}" alt="{{ .Title }}">
                    {{ end }}
                    <div class="p-6">
                        <h2 class="tracking-widest text-xs title-font font-medium text-gray-400 mb-1">
                            {{ if .Params.categories }}{{ index .Params.categories 0 | upper }}{{ else }}POST{{ end }}
                        </h2>
                        <h1 class="title-font text-lg font-medium text-gray-900 mb-3">{{ .Title }}</h1>
                        <p class="leading-relaxed mb-3">{{ if .Summary }}{{ .Summary | truncate 120 }}{{ else }}{{
                            .Content | truncate 120 | plainify }}{{ end }}</p>
                        <div class="flex items-center flex-wrap">
                            <a href="{{ .Permalink }}"
                                class="text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0">Read More
                                <svg class="w-4 h-4 ml-2" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M5 12h14"></path>
                                    <path d="M12 5l7 7-7 7"></path>
                                </svg>
                            </a>
                            <span
                                class="text-gray-400 mr-3 inline-flex items-center lg:ml-auto md:ml-0 ml-auto leading-none text-sm pr-3 py-1 border-r-2 border-gray-200">
                                <svg class="w-4 h-4 mr-1" stroke="currentColor" stroke-width="2" fill="none"
                                    stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                                    <path
                                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z">
                                    </path>
                                </svg>{{ .Date.Format "Jan 2, 2006" }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            {{ end }}
            {{ end }}
        </div>
        <div class="flex justify-center mt-8">
            <a href="/posts" class="btn btn-primary">View All Posts</a>
        </div>
    </div>
</section>

<!-- CTA Section -->
<section class="text-gray-600 body-font">
    <div class="container px-5 py-24 mx-auto">
        <div class="flex flex-col text-center w-full">
            <h2 class="sm:text-3xl text-2xl font-medium title-font text-gray-900 mb-4">Get Involved</h2>
            <p class="lg:w-2/3 mx-auto leading-relaxed text-base mb-8">Join our community and help make Cache Valley an
                even better place to live, work, and play.</p>
            <div class="flex justify-center">
                <a href="/organizations" class="btn btn-primary mr-4">Partner With Us</a>
                <a href="/posts" class="btn btn-secondary">Stay Informed</a>
            </div>
        </div>
    </div>
</section>
{{ end }}